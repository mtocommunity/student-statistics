---
import { CreateDataDialog } from "@/core/components/molecules/create-data-dialog"
import HeaderQuery from "@/core/components/molecules/HeaderQuery.astro"
import PaginationQueryNav from "@/core/components/molecules/PaginationQueryNav.astro"
import Section from "@/core/components/organisms/data/Section.astro"
import type { OrderQuery } from "@/core/schema/query-schema"
import SemesterCard from "@/semester/components/molecules/SemesterCard.astro"
import { type Semester } from "@/semester/schema/semester-schema"
import { LuPackageOpen } from "react-icons/lu"

// Context
interface Props {
  semesters: Semester[]
  page: number
  totalPages: number
  q?: string
  orderQuery?: OrderQuery
}

const { semesters, page, totalPages, q, orderQuery } = Astro.props
const hasSemesters = semesters.length > 0
---

<Section class="flex w-full max-w-none flex-1 flex-col px-0">
  <HeaderQuery {q} {orderQuery}>
    <CreateDataDialog client:load dataName="semester" />
  </HeaderQuery>

  <div
    class:list={[
      "flex-1 gap-4 py-4",
      {
        "flex flex-col items-center justify-center": !hasSemesters,
        "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3": hasSemesters,
      },
    ]}
  >
    {
      hasSemesters ? (
        semesters.map((semester) => <SemesterCard {semester} />)
      ) : (
        <>
          <LuPackageOpen className="size-18 stroke-1" />
          Parece que a√∫n no ha creado un ciclo.
        </>
      )
    }
  </div>

  <PaginationQueryNav {page} {totalPages} />
</Section>
