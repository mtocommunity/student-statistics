---
import { CreateDataDialog } from "@/core/components/molecules/create-data-dialog"
import HeaderQuery from "@/core/components/molecules/HeaderQuery.astro"
import PaginationQueryNav from "@/core/components/molecules/PaginationQueryNav.astro"
import Section from "@/core/components/organisms/data/Section.astro"
import type { OrderQuery } from "@/core/schema/query-schema"
import CourseCard from "@/course/components/molecules/CourseCard.astro"
import type { Course } from "@/course/schema/course-schema"
import { LuPackageOpen } from "react-icons/lu"

// Context
interface Props {
  courses: Course[]
  page: number
  totalPages: number
  q?: string
  orderQuery?: OrderQuery
}

const { semesterId } = Astro.params
const { courses, page, totalPages, q, orderQuery } = Astro.props
const hasCourses = courses.length > 0
---

<Section class="flex w-full max-w-none flex-1 flex-col px-0">
  <HeaderQuery {q} {orderQuery}>
    <CreateDataDialog
      client:load
      dataName="course"
      defaultValues={{ semesterId: Number(semesterId) }}
    />
  </HeaderQuery>

  <div
    class:list={[
      "flex-1 gap-4 py-4",
      {
        "flex flex-col items-center justify-center": !hasCourses,
        "grid auto-rows-auto grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 xl:grid-rows-3":
          hasCourses,
      },
    ]}
  >
    {
      hasCourses ? (
        courses.map((course) => <CourseCard {course} />)
      ) : (
        <>
          <LuPackageOpen className="size-18 stroke-1" />
          Parece que a√∫n no ha creado un curso.
        </>
      )
    }
  </div>

  <PaginationQueryNav {page} {totalPages} />
</Section>
